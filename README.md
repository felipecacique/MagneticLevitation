# **Magnetic Levitation Using Arduino**

## **Project Overview**

This project demonstrates magnetic levitation using an Arduino-controlled electromagnetic system. The goal is to levitate a magnet in mid-air using feedback from Hall-effect sensors and a PID (Proportional-Integral-Derivative) control system to maintain stability.

## **Table of Contents**
- [Introduction](#introduction)
- [System Components](#system-components)
- [Theory](#theory)
  - [Magnetic Field of a Solenoid](#magnetic-field-of-a-solenoid)
  - [Levitation Equilibrium](#levitation-equilibrium)
- [Circuit Design](#circuit-design)
  - [Current Amplification](#current-amplification)
  - [Sensor Calibration](#sensor-calibration)
- [Control System](#control-system)
  - [PID Control](#pid-control)
  - [Arduino Code](#arduino-code)
- [Calibration](#calibration)
- [Conclusion](#conclusion)
- [References](#references)

---

## **Introduction**

Magnetic levitation technology enables objects to float by balancing magnetic forces and gravitational pull. The project focuses on constructing a magnetic levitation system using an Arduino, emphasizing control through sensors and precise electromagnetic fields. This system successfully levitated a magnet vertically using a solenoid coil, Hall-effect sensors, and a PID (Proportional-Integral-Derivative) controller.

## **System Components**
- **Arduino Uno**
- **Solenoid Coil**
- **TIP112 Darlington Transistor**
- **Hall-effect Sensors (SS495A)**
- **Neodymium Magnet**
- **Operational Amplifier (LM324)**

## **System Overview**
The primary objective was to develop a closed-loop control system that levitates a magnet by manipulating the electromagnetic force generated by a solenoid coil. The system consists of:
{Solenoid Coil}: Generates the magnetic field to attract the magnet.
{Hall-Effect Sensors}: Measure the magnetic field strength to provide feedback on the magnet’s position.
{Arduino Microcontroller}: Processes the sensor data and adjusts the coil's current accordingly.
{PID Control Algorithm}: Ensures stable levitation by dynamically adjusting the control signal.

## **General System Analysis**
The proposed magnetic levitation system is composed of an electromagnet placed above the levitating object. The electromagnet generates a magnetic field that is controlled by the current flowing from the Arduino. The magnetic field produces a vertical magnetic force on the object that acts in the opposite direction to its weight. The goal is to balance these forces so that the object remains suspended in the air.

A Hall-effect sensor detects the position of the levitating object by measuring the magnetic field generated by both the magnet and the coil. The sensor outputs an electrical signal corresponding to the object’s position. This signal is fed into the controller, which then adjusts the magnetic field strength in real-time to ensure the object remains stable at the desired reference position. The feedback control loop continuously adjusts the current to maintain the object's position.

A control system block diagram is used to represent how the components interact with each other:

IMAGE HERE

- The electromagnet generates the magnetic field.
- The Hall-effect sensor detects the position of the object by measuring the magnetic field.
- The sensor's signal is sent to the Arduino (controller).
- The Arduino adjusts the current in the coil based on the position feedback, controlling the magnetic field to maintain stable levitation.

The system dynamically balances the forces acting on the object, which requires precise real-time control. The PID controller plays a crucial role in minimizing the error between the desired and actual positions of the levitating object. The control loop ensures that any disturbance in the object’s position is corrected quickly by adjusting the magnetic field generated by the electromagnet.


## **Physics and Electromagnetism**
The foundation of this project relies on **electromagnetic theory**, particularly the interaction between a solenoid’s magnetic field and a ferromagnetic object (the magnet).

### **Magnetic Field of a Solenoid**
The solenoid generates a magnetic field when current flows through its windings. The magnetic field (**B**) inside a solenoid is given by:

```math
B = μ_0 * (N * I) / L
```
Where:

- **B**: Magnetic flux density (Tesla)
- **μ_0**: Permeability of free space (\(4π × 10^{-7} \ T \cdot m / A\))
- **N**: Number of turns of the coil
- **I**: Current through the coil (Amps)
- **L**: Length of the solenoid (meters)

The force on the levitating magnet must balance gravity:

```math
F_m = F_g = m \cdot g
```
Where:

- **F_m**: Magnetic force acting on the magnet (Newtons)
- **F_g**: Gravitational force acting on the magnet (Newtons)
- **m**: Mass of the magnet (kg)
- **g**: Gravitational acceleration (\(9.81 \, m/s^2\))

### **Levitation Equilibrium**
Stable levitation occurs when the upward magnetic force generated by the solenoid equals the downward gravitational force acting on the magnet. The system maintains this balance by adjusting the current in real-time based on sensor feedback.

